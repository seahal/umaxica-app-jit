{
  "name": "umaxica-app-jit",
  "dockerComposeFile": [
    "../compose.yml"
  ],
  "service": "main",
  "workspaceFolder": "/home/jit/main",
  "build": {
    "dockerfile": "../Dockerfile",
    "context": "..",
    "target": "development",
    "args": {
      "DOCKER_UID": "1000",
      "DOCKER_GID": "1000"
    }
  },
  "overrideCommand": false,
  "remoteUser": "jit",
  "remoteEnv": {
    "EDITOR": "code --wait --reuse-window"
  },
  "forwardPorts": [
    3000,
    3333,
    5432,
    5433,
    5434,
    6379,
    9092,
    9200,
    9000,
    9001,
    8080,
    5601,
    63342
  ],
  "portsAttributes": {
    "3333": {
      "label": "Rails Server (Docker)",
      "onAutoForward": "notify",
      "protocol": "http"
    },
    "5433": {
      "label": "PostgreSQL Primary"
    },
    "5434": {
      "label": "PostgreSQL Replica"
    },
    "6379": {
      "label": "Redis"
    },
    "9092": {
      "label": "Kafka"
    },
    "3000": {
      "label": "Rails Server (Local)",
      "protocol": "http"
    },
    "9000": {
      "label": "Minio API"
    },
    "9001": {
      "label": "Minio Console",
      "protocol": "http"
    },
    "8080": {
      "label": "Kafka UI",
      "protocol": "http"
    },
    "63342": {
      "label": "JetBrains Backend",
      "onAutoForward": "silent"
    }
  },
  "features": {
    "ghcr.io/devcontainers/features/github-cli:latest": {},
    "ghcr.io/devcontainers/features/git:latest": {
      "ppa": true,
      "version": "latest"
    },
    "ghcr.io/fumito-ito/devcontainer-features/codex-cli:latest": {
      "version": "latest"
    },
    "ghcr.io/thamaji/devcontainer-features/lefthook:latest": {
      "VERSION": "latest"
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "Shopify.ruby-lsp",
        "Shopify.ruby-extensions-pack",
        "bradlc.vscode-tailwindcss",
        "ms-vscode.vscode-typescript-next",
        "biomejs.biome",
        "ms-azuretools.vscode-docker",
        "cweijan.vscode-postgresql-client2",
        "GitHub.vscode-pull-request-github",
        "ms-vscode.vscode-json",
        "ms-vscode.vscode-yaml",
        "humao.rest-client",
        "streetsidesoftware.code-spell-checker",
        "ms-vscode.remote-explorer",
        "ninoseki.vscode-mogami",
        "rubocop.vscode-rubocop"
      ],
      "settings": {
        "extensions.verifySignature": false,
        "terminal.integrated.defaultProfile.linux": "bash",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.fixAll.biome": "explicit"
        },
        "files.associations": {
          "*.erb": "erb",
          "Procfile*": "shellscript",
          "compose.yml": "yaml",
          "*.yml": "yaml"
        },
        "[ruby]": {
          "editor.defaultFormatter": "Shopify.ruby-lsp"
        },
        "[javascript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[typescript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "ruby.lsp.enabledFeatures": {
          "codeActions": true,
          "diagnostics": true,
          "documentHighlights": true,
          "documentLink": true,
          "documentSymbols": true,
          "foldingRanges": true,
          "formatting": true,
          "hover": true,
          "inlayHint": true,
          "onTypeFormatting": true,
          "selectionRanges": true,
          "semanticHighlighting": true,
          "completion": true,
          "codeLens": true,
          "definition": true,
          "workspaceSymbol": true,
          "signatureHelp": true,
          "typeHierarchy": true
        }
      }
    },
    "jetbrains": {
      "remoteId": "intellij",
      "backend": "intellij",
      "plugins": [
        "org.jetbrains.plugins.ruby"
      ],
      "containerEnv": {
        "DEVCONTAINER_IDE": "jetbrains",
        "DEVCONTAINER_AUTO_START_BIN_DEV": "0"
      }
    }
  },
  "containerEnv": {
    "RAILS_ENV": "development",
    "RACK_ENV": "development",
    "DEVCONTAINER_AUTO_START_BIN_DEV": "1"
  },
  "postCreateCommand": "bundle install && bun install",
  "postStartCommand": "sudo chown -R jit:group /home/jit/main || true && echo 'Development environment ready!'",
  "initializeCommand": "echo 'Initializing Umaxica Rails Development Environment...'",
  "onCreateCommand": "echo 'Devcontainer created successfully'",
  "updateContentCommand": "bundle install && bun install",
  "mounts": [
    "source=${localEnv:HOME}/.claude,target=/home/jit/.claude,type=bind",
    "source=${localEnv:HOME}/.codex,target=/home/jit/.codex,type=bind"
  ]
}

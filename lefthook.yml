pre-commit:
  parallel: true
  commands:
    audit(bundler):
      run: bundle exec bundler-audit check --update
    audit(bun):
      run: bun audit --update
    brakeman:
      run: bundle exec brakeman --no-pager
    rubocop:
      stage_fixed: true
      run: bundle exec rubocop -A
    erb-lint:
      stage_fixed: true
      run: bundle exec erb_lint app/views/
    biome-format:
      stage_fixed: true
      run: bun run format
    lint:
      run: bun run lint
      stage_fixed: true
      glob: "*.{js,jsx,ts,tsx}"
    typecheck:
      run: bun run type
    secret-scan:
      run: gitleaks protect
pre-push:
  parallel: true
  commands:
    rails test:
      run: bundle exec rails test
    bun test:
      run: bun test

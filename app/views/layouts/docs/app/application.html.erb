<!DOCTYPE html>
<html lang="<%= get_language %>">
<head>
  <%= display_meta_tags site: "#{ENV['BRAND_NAME']} (app) Documents" %>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="turbo-refresh-method" content="morph">
  <meta name="turbo-refresh-scroll" content="preserve">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "docs/app/main" %>
  <%= javascript_importmap_tags %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
  <link rel="icon" href="https://perm.umaxica.app/favicon.ico" sizes="32x32">
</head>

<body class="bg-[hsl(var(--background))] text-[hsl(var(--foreground))]">
<% code_name = ENV.fetch("BRAND_NAME") { ENV.fetch("NAME") } %>
<% edge_host = ENV["EDGE_SERVICE_URL"].presence %>

<div class="min-h-screen">
  <div class="mx-auto flex min-h-screen max-w-6xl flex-col px-6">
    <%= render "concern/flash_messages" %>

    <header class="flex flex-wrap items-center justify-between gap-4 border-b border-[hsl(var(--border))] py-6">
      <div class="flex flex-col">
        <span class="text-xs font-semibold uppercase tracking-[0.2em] text-[hsl(var(--muted-foreground))]">Docs</span>
        <h1 class="text-2xl font-semibold tracking-tight">
          <% if edge_host.present? %>
            <a class="transition hover:text-[hsl(var(--primary))]" href="http://<%= edge_host %>/"><%= code_name %></a>
          <% else %>
            <%= code_name %>
          <% end %>
          (app)
        </h1>
      </div>
      <nav class="flex flex-wrap gap-3 text-sm">
        <%= link_to_if !@user&.active?, "logout?", new_auth_app_registration_path,
                       class: "rounded-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] px-4 py-2 font-semibold" %>
        <%= link_to_unless @user&.active?, "login?", new_auth_app_registration_path,
                           class: "rounded-full bg-[hsl(var(--primary))] px-4 py-2 font-semibold text-[hsl(var(--primary-foreground))]" %>
      </nav>
    </header>

    <main class="flex-1 py-10">
      <%= yield %>
    </main>

    <footer class="border-t border-[hsl(var(--border))] py-6 text-sm text-[hsl(var(--muted-foreground))]">
      <nav class="flex flex-wrap items-center gap-4">
        <% if edge_host.present? %>
          <a class="font-semibold text-[hsl(var(--foreground))]" href="http://<%= edge_host %>/">Home</a>
        <% end %>
        <span>Support</span>
        <span>Privacy</span>
        <span>Security</span>
        <span>Accessibility</span>
      </nav>
      <div class="mt-4">
        <%= render "concern/copyright" %>
      </div>
    </footer>
  </div>
</div>
</body>
</html>

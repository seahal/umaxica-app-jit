<% content_for :page_title, t('bff.app.preference.emails.new.page_title') %>

<h1><%= t('bff.app.preference.emails.new.heading') %></h1>

<p><%= t('bff.app.preference.emails.new.description') %></p>

<%= render "concern/flash_messages" %>

<%= form_with model: @email_preference_request, url: bff_app_preference_emails_path, local: true do |f| %>
  <% if @email_preference_request.errors.any? %>
    <div class="bg-red-50 border border-red-200 text-red-800 p-4 rounded-md mb-4">
      <ul class="space-y-1 text-sm">
        <% @email_preference_request.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group mb-4">
    <%= f.label :email_address, t('bff.app.preference.emails.new.email_label'), class: 'block text-sm font-medium text-gray-700' %>
    <%= f.email_field :email_address, required: true, autocomplete: 'email', class: 'mt-1 block w-full border border-gray-300 rounded-md p-2' %>
  </div>

  <div class="mb-4">
    <%= render 'concern/cloudflare_turnstile' %>
  </div>

  <div class="form-actions flex items-center gap-3">
    <%= f.submit t('bff.app.preference.emails.new.submit'), class: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700' %>
    <%= link_to t('bff.app.preferences.back_to_settings'), bff_app_preference_path, class: 'text-sm text-gray-700 hover:underline' %>
  </div>
<% end %>
